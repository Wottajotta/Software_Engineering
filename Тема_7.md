# Тема 7. Работа с файлами (ввод, вывод)

### Отчет по Теме №7 выполнил:

* Харченко Владислав Андреевич
* АИС-22-1

|Задание|Лаб_раб|Сам_раб|
|---------|----|----|
|Задание 1|+|+|
|Задание 2|+|+|
|Задание 3|+|+|
|Задание 4|+|+|
|Задание 5|+|+|
|Задание 6|+|-|
|Задание 7|+|-|
|Задание 8|+|-|
|Задание 9|+|-|
|Задание 10|+|-|

знак "+" - задание выполнено; знак "-" - задание не выполнено;

Работу проверили:
*к.э.н., доцент Панов М.А.

### Лабораторная работа №1
**Составьте текстовый файл и положите его в одну директорию с программой на Python. Текстовый файл должен состоять минимум из двух строк.**


**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Lab7_1.png "2.1")


### Лабораторная работа №2
**Напишите программу, которая выведет только первую строку из вашего файла, при этом используйте конструкцию open()/close().**

```python
f = open("input.txt", "r")
print(f.readline())
f.close()
```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Lab7_2.png "2.2")


### Лабораторная работа №3
**Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию open()/close().**

```python
f = open("input.txt", "r")
print(f.readline())
f.close()
```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Lab7_3.png "2.3")


### Лабораторная работа №4
**ННапишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию with open().**

```python
with open("input.txt") as f:
    print(f.readline())
```


**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Lab7_4.png "2.4")


### Лабораторная работа №5
**Напишите программу, которая выведет каждую строку из вашего файла отдельно, при этом используйте конструкцию with open().**

```python
def useless(lst):
    return max(lst)/len(lst)

with open("input.txt") as f:
    for line in f:
        print(line)
```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Lab7_5.png "2.5")


### Лабораторная работа №6
**Напишите программу, которая будет добавлять новую строку в ваш файл, а потом выведет полученный файл в консоль. Вывод можно осуществлять любым способом.**

```python
with open("input.txt", "a+") as f:
    f.write("\nIm additional line")

with open("input.txt", "r") as f:
    result = f.readline()
    print(result)

with open("input.txt") as f:
    for line in f:
        print(line)
```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Lab7_6.png "2.6")


### Лабораторная работа №7
**Напишите программу, которая перепишет всю информацию, которая была у вас в файле до этого, например напишет любые данные из произвольно вами составленного списка.**

```python
lines = ["one","two","three",]
with open("input.txt", "w") as f:
    for line in lines:
        f.write("\nCycle run " + line)
    print("Done!")
```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Lab7_7.png "2.7")



### Лабораторная работа №8
**Выберите любую папку на своем компьютере, имеющую вложенные директории. Выведите на печать в терминал ее содержимое, как и всех подкаталогов при помощи функции print_docs(directory).**

```python
import os

def print_docs(directory):
    all_files = os.walk(directory)
    for catalog in all_files:
        print(f"Папка {catalog[0]} содержит:")
    print(f"Директории: {", ".join([folder for folder in catalog[1]])}")
    print(f"Файлы: {", ".join([file for file in catalog[2]])}")
    print("-" * 40)


print_docs("\\Users\\User\\usue\Тема_7")
```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Lab7_8.png "2.8")


### Лабораторная работа №9
**Документ «input.txt» содержит следующий текст:**
**Приветствие**
**Спасибо**
**Извините**
**Пожалуйста**
**До свидания**
**Ты готов?**
**Как дела?**
**С днем рождения!**
**Удача!**
**Я тебя люблю.**

**Требуется реализовать функцию, которая выводит слово, имеющее максимальную длину (или список слов, если таковых несколько). Проверьте работоспособность программы на своем наборе данных**

```python
def longest_words(file):
    with open(file, encoding='utf-8') as f:
        words = f.read().split()
        max_length = len(max(words, key=len))
        for word in words:
            if len(word) == max_length:
                sought_words = word

        if len(sought_words) == 1:
            return sought_words[0]
        return sought_words
    

print(longest_words("input.txt"))
```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Lab7_9.png "2.9")


### Лабораторная работа №10
**Требуется создать csv-файл «rows_300.csv» со следующими столбцами:**
**• № - номер по порядку (от 1 до 300);**
**• Секунда – текущая секунда на вашем ПК;**
**• Микросекунда – текущая миллисекунда на часах.**

```python
import csv
import datetime
import time

with open("rows_300.csv", 'w', encoding='utf-8', newline='') as f:
    writer = csv.writer(f)
    writer.writerow(['№','Секунда', 'Микросекунда'])
    for line in range(1, 301):
        writer.writerow([line, datetime.datetime.now().second, datetime.datetime.now().microsecond])

        time.sleep(0.01)
```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Lab7_10.png "2.10")



### Самостоятельная работа №1
**Найдите в интернете любую статью (объем статьи не менее 200 слов), скопируйте ее содержимое в файл и напишите программу, которая считает количество слов в текстовом файле и определит самое часто встречающееся слово. Результатом выполнения задачи будет: скриншот файла со статьей, листинг кода, и вывод в консоль, в котором будет указана вся необходимая информация**

```python
from collections import Counter
import re

def main():
    with open('input.txt', 'r', encoding='utf-8') as file:
        text = file.read()

    words = re.findall(r'bw+b', text.lower())
    total_words = len(words)

    common_word, common_count = Counter(words).most_common(1)[0] if words else (None, 0)

    print(f"Общее количество слов: {total_words}")
    if common_word:
        print(f"Самое часто встречающееся слово: '{common_word}' (встречается {common_count} раз)")
    else:
        print("Нет слов для анализа.")

if __name__ == "__main__":
    main()
```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Sam7_1.png "2.1")



### Самостоятельная работа №2


### У вас появилась потребность в ведении книги расходов, посмотрев все существующие варианты вы пришли к выводу что вас ничего не устраивает и нужно все делать самому. Напишите программу для учета расходов. Программа должна позволять вводить информацию о расходах, сохранять ее в файл и выводить существующие данные в консоль. Ввод информации происходит через консоль. Результатом выполнения задачи будет скриншот файла с учетом расходов, листинг кода, и вывод в консоль, с демонстрацией работоспособности программы.**

```python
import json
import os

EXPENSES_FILE = 'expenses.json'

def load_expenses():
    if os.path.exists(EXPENSES_FILE):
        with open(EXPENSES_FILE, 'r') as file:
            return json.load(file)
    return []

def save_expenses(expenses):
    with open(EXPENSES_FILE, 'w') as file:
        json.dump(expenses, file, indent=4)

def add_expense(expenses):
    date = input("Введите дату (гггг-мм-дд): ")
    amount = float(input("Введите сумму: "))
    category = input("Введите категорию: ")
    
    expense = {
        'date': date,
        'amount': amount,
        'category': category
    }
    
    expenses.append(expense)
    save_expenses(expenses)
    print("Расход добавлен!")

def display_expenses(expenses):
    if not expenses:
        print("Нет расходов для отображения.")
        return
    
    print("nСписок расходов:")
    for expense in expenses:
        print(f"Дата: {expense['date']}, Сумма: {expense['amount']}, Категория: {expense['category']}")

def main():
    expenses = load_expenses()
    
    while True:
        print("nМеню:")
        print("1. Добавить расход")
        print("2. Показать все расходы")
        print("3. Выйти")
        
        choice = input("Выберите действие (1/2/3): ")
        
        if choice == '1':
            add_expense(expenses)
        elif choice == '2':
            display_expenses(expenses)
        elif choice == '3':
            print("Выход из программы.")
            break
        else:
            print("Неверный выбор. Попробуйте снова.")

if __name__ == "__main__":
    main()
```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Sam7_2.png "2.2")




### Самостоятельная работа №3
**Имеется файл input.txt с текстом на латинице. Напишите программу, которая выводит следующую статистику по тексту: количество букв латинского алфавита; число слов; число строк.** **• Текст в файле:**
**Beautiful is better than ugly. Explicit is better than implicit. Simple is better than complex. Complex is better than complicated.**
**• Ожидаемый результат:** 
**Input file contains: 108 letters 20 words 4 lines**

```python
def main():
    letter_count = 0
    word_count = 0
    line_count = 0


    with open('input.txt', 'r', encoding='utf-8') as file:
        for line in file:
            line_count += 1 
            letter_count += sum(c.isalpha() for c in line) 
            word_count += len(line.split())

    print(f"Input file contains: {letter_count} letters {word_count} words {line_count} lines")

if __name__ == "__main__":
    main()
```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Sam7_2.png "2.3")




### Самостоятельная работа №4
**Напишите программу, которая получает на вход предложение, выводит его в терминал, заменяя все запрещенные слова звездочками * (количество звездочек равно количеству букв в слове). Запрещенные слова, разделенные символом пробела, хранятся в текстовом файле input.txt. Все слова в этом файле записаны в нижнем регистре. Программа должна заменить запрещенные слова, где бы они ни встречались, даже в середине другого слова. Замена производится независимо от регистра: если файл input.txt содержит запрещенное слово exam, то слова exam, Exam, ExaM, EXAM и exAm должны быть заменены на ****. 
**• Запрещенные слова:** 
**hello email python the exam wor is**
**• Предложение для проверки:**
**Hello, world! Python IS the programming language of thE future. My EMAIL is.... PYTHON is awesome!!!!**
**• Ожидаемый результат:**
 **\*\*\*\*, \*\*\*ld! \*\*\*\*\*\* \*\* \*\*\* programming language of \*\*\* future. My \*\*\*\*\* \*\*\*\* \*\*\*\*\*\* \*\* awesome!!!!**


```python
import re

def load_forbidden_words(filename):
    with open(filename, 'r', encoding='utf-8') as file:
        return set(file.read().strip().split())

def replace_forbidden_words(sentence, forbidden_words):
    def replace(match):
        word = match.group(0)
        return '*' * len(word)

    pattern = r'b(' + '|'.join(re.escape(word) for word in forbidden_words) + r')b'
    
    result = re.sub(pattern, replace, sentence, flags=re.IGNORECASE)
    
    return result

def main():
    forbidden_words = load_forbidden_words('input.txt')
    
    sentence = input("Введите предложение: ")

    filtered_sentence = replace_forbidden_words(sentence, forbidden_words)

    print(filtered_sentence)

if __name__ == "__main__":
    main()

```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Sam7_4.png "2.4")



### Самостоятельная работа №5
**Нужно создать программу, которая будет управлять списком книг в библиотеке. Программа должна уметь добавлять новые книги, выводить список всех книг и удалять книги по названию. Все данные будут храниться в текстовом файле.**

```python
def add_book(book_name):
    with open('input.txt', 'a') as file:
        file.write(book_name + 'n')
    print(f'Книга "{book_name}" добавлена.')

def list_books():
    try:
        with open('input.txt', 'r') as file:
            books = file.readlines()
            if books:
                print("Список книг:")
                for book in books:
                    print(book.strip())
            else:
                print("Список книг пуст.")
    except FileNotFoundError:
        print("Файл с книгами не найден.")

def remove_book(book_name):
    try:
        with open('input.txt', 'r') as file:
            books = file.readlines()
        
        with open('input.txt', 'w') as file:
            found = False
            for book in books:
                if book.strip() != book_name:
                    file.write(book)
                else:
                    found = True
            if found:
                print(f'Книга "{book_name}" удалена.')
            else:
                print(f'Книга "{book_name}" не найдена.')
    except FileNotFoundError:
        print("Файл с книгами не найден.")

def main():
    while True:
        print("n1. Добавить книгу")
        print("2. Показать список книг")
        print("3. Удалить книгу")
        print("4. Выход")
        
        choice = input("Выберите действие (1-4): ")
        
        if choice == '1':
            book_name = input("Введите название книги: ")
            add_book(book_name)
        elif choice == '2':
            list_books()
        elif choice == '3':
            book_name = input("Введите название книги для удаления: ")
            remove_book(book_name)
        elif choice == '4':
            print("Выход из программы.")
            break
        else:
            print("Неверный выбор. Попробуйте снова.")

if __name__ == "__main__":
    main()
```

**Результат**


![Изображение](https://github.com/Wottajotta/Software_engineering/blob/Тема_7/pic/Sam7_5.png "2.5")

